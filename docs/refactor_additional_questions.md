# 리팩토링 추가 질의서 (사전 확인용)

## 1) 현재 확인 결과 요약
- 기준 문서: `docs/patent_summary_draft.md`
- 프로젝트 상태: `backend/app/services/agents/*`에 특허 초안의 1~6 모듈 대응 코드가 있으나, 다수 `TODO`/목업 문자열 반환 수준.
- UI 상태: 워크플로우 실행/시각화 페이지는 존재하나, 특허 초안 수준의 정량 판별/매칭/로드맵 산출을 보장하는 명세가 없음.
- 결론: 리팩토링 방향은 타당하나, 구현 우선순위/데이터 소스/정확도 기준/출력 포맷 기준이 없어 바로 코딩 계획서 작성 시 추정이 과도함.

## 2) 필수 질의 (이 답변 없이는 상세 코딩 계획 확정 불가)

### A. 리팩토링 범위/우선순위
1. 이번 리팩토링의 1차 범위는 어디까지인가요?
- 선택지: `백엔드 엔진 중심` / `백엔드+프론트 동시` / `엔드투엔드(데이터 파이프라인 포함)`

2. 특허 초안 7개 모듈 중 MVP 필수 모듈은 무엇인가요? (우선순위 순서 필요)
3. 기존 기능과 호환을 어디까지 유지해야 하나요?
- API 경로/응답 스키마 하위호환 필요 여부
  ### B. 도메인 규칙(핵심)
4. 이용자 유형 분류 기준을 규칙 기반으로 먼저 고정할까요, LLM 추론 중심으로 갈까요?
- 답변 : 규칙 기반 + LLM 보조(설명 생성)
5. 성장단계(Seed/Start-up/Scale-up/Advanced/Transition) 분류의 임계치(업력/매출/고용 등) 공식 정의가 있나요?
- 답변 : 이건 인터넷 서치가 필요해 내가 전문가가 아니라서 일반적인 기준치가 있을거야 그걸 가지고 LLM이 보조 추론할거야
6. `예비창업자형/초기기업형/성장기업형/전환·재도전형`과 `GrowthStage`의 매핑 테이블을 확정할 수 있나요?
- 답변 : 이건 인터넷 서치가 필요해 내가 전문가가 아니라서 일반적인 기준치가 있을거야 그걸 가지고 LLM이 보조 추론할거야

### C. 정책/인증/IP 지식베이스
7. 인증·지원사업·RFP 기준 데이터의 공식 소스는 무엇인가요?
- 답변 : 이건 인터넷 서치가 필요해 내가 전문가가 아니라서 일반적인 기준치가 있을거야 그걸 가지고 LLM이 보조 추론할거야
8. 지식베이스 갱신 주기와 운영 주체는 누구인가요? (예: 월 1회 운영자 승인)
 - 지식베이스는 최초에 쌓인 지식을 토대로 하되, 사업계획서가 생성될때마다 갱신될거야 (LLM 및 상담원이 상담해서 결과 나오는 것)
9. 인증/IP 적합도 점수 산식(가중치, 컷오프, 설명가능성 요구)을 정해주실 수 있나요?
- 답변 : 이건 인터넷 서치가 필요해 내가 전문가가 아니라서 일반적인 기준치가 있을거야 그걸 가지고 LLM이 보조 추론할거야

### D. 입력/출력 스펙
10. `CompanyProfile` 최소 필수 필드는 무엇인가요? (현재 필드로 충분한지)
- 답변 : 이건 인터넷 서치가 필요해 내가 전문가가 아니라서 일반적인 기준치가 있을거야 그걸 가지고 LLM이 보조 추론할거야
11. 사업계획서 입력 포맷은 어떤 형태를 지원해야 하나요?
- 답변 : 이건 내가 받아놓은게 있어 양식을 업로드 하거나 폴더를 지정해놓으면 거기에 내가 올려놓고 학습시키는등의 방안을 제시해줘
- 텍스트 직접입력 / 파일 업로드(pdf, docx,hwp,hwpx,ppt,pptx,txt,excel) / 둘 다
12. 출력물 공식 포맷은 무엇인가요?
- 답변 : 공식 포멧은 브라우저로 열도록 해서 브라우저에서 출력할 수 있도록 하자, 마크다운으로 보여주되, AI 티가 안나도록 위에서 학습시킨 양식대로
- `Markdown` / `HTML` / `PDF` (복수 선택)
13. 다운로드 문서(`business_plan`, `roadmap`)는 현재 목업 HTML인데, 템플릿 기반 정식 문서화를 이번 범위에 포함하나요?
- 포함한다.

### E. 평가/검증 기준
14. 분류·매칭 정확도 수용 기준(KPI)을 어떻게 둘까요?
- 답변 : 전문가 판정 대비 일치율, 추천 수용률, 누락률
15. “완료” 정의(Definition of Done)를 모듈별로 합의할 수 있나요?
- 답변 : 테스트 통과 + 샘플 케이스 N개 재현 + 성능 기준 충족
16. 필수 테스트 범위는 어디까지인가요?
- 답변 : 단위/통합/회귀/부하

### F. 아키텍처/운영 제약
17. 모델 전략은 무엇인가요?
- 답변 : OpenRouter 고정
18. 개인정보/기업 민감정보 저장 정책(보관 기간, 마스킹, 로그 제한)은 어떻게 적용하나요?
- 답변 : 일단 민감정보 저장 정책은 제외하자 별도 정책없이 진행한다.
19. 멀티테넌시 격리와 권한 정책에서 이번 리팩토링 시 강화해야 할 항목이 있나요?
- 답변 : 없음
20. 배포 환경(개발/스테이징/운영)과 롤백 전략은 이미 정해져 있나요?
- 답변 : 없음

### G. 마이그레이션/일정
21. 기존 프로젝트/데이터(Neo4j, RDB, 문서 아티팩트) 마이그레이션 필요 여부?
- 답변 : 없음
22. 무중단 전환이 필요한가요, 점검 시간 허용이 가능한가요?
- 답변 : 가능, 점검시간은 저녁시간대로 가능함 (공무원 및 회사원이 사용)
23. 목표 일정과 단계별 마일스톤(예: 2주 단위)이 있나요?
- 답변 : 1주내 

## 3) 응답 정리 결과

```md
## 범위
- 1차 범위: 엔드투엔드 (백엔드 파이프라인 + 프론트엔드 UI 전체)
- MVP 모듈 우선순위: 전 모듈 개발 후 일괄 오픈 (개발 순서에 맞춰 진행)
- 하위호환 정책: (정리가 필요한 정책 리스트를 후속 질의로 안내 예정)

## 분류/매칭 규칙
- 유형 분류 방식: 규칙 기반 + LLM 보조 (설명 생성)
- 성장단계 임계치: LLM 인터넷 서치 기반 보조 추론
- 점수 산식: LLM 인터넷 서치 기반 보조 추론

## 데이터 소스
- 정책/인증/RFP 소스: LLM 인터넷 서치 기반 보조 추론
- 갱신 주기/운영 주체: 최초 지식 기반 활용 + 사업계획서 생성(상담 결과) 시마다 지식베이스 갱신

## 입출력
- 입력 채널: 텍스트 직접입력 + 다양한 포맷의 파일/폴더 업로드 (pdf, docx, hwp, hwpx, ppt, pptx, txt, excel) 
  *(방안: 추출용 파이프라인 별도 세팅 + 묶음 업로드 UI 제공)*
- 출력 포맷: AI가 생성한 티가 나지 않도록 원래 양식 느낌을 살린 브라우저 HTML 뷰어 출력 + PDF/다운로드
- 문서 템플릿화 범위: 포함 적용함

## 검증/운영
- KPI/DoD: 전문가 판정 대비 일치율, 추천 수용률, 누락률 / 테스트 통과 + 샘플 케이스 재현 + 성능 기준 충족
- 테스트 범위: 단위/통합/회귀/부하 테스트
- 보안/개인정보 정책: 별도 정책 없음 (보안 마스킹 등은 제외하고 빠른 개발 진행)
- 배포/롤백: 저녁 시간대 점검 시간을 활용한 배포 (무중단 전환 불필요)

## 일정
- 마일스톤: 1주 내 전체 완료
```

## 4) 다음 단계
- 위 질의 응답이 수집되면, 그 즉시 `리팩토링 코딩 계획서(모듈별 작업분해/WBS, API 변경안, 데이터모델 변경안, 테스트 전략, 단계별 릴리즈 플랜)`로 전환합니다.
